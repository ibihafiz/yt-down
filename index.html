<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>YouTube Downloader</title>
  <style>
    body { font-family: Arial; padding: 40px; max-width: 600px; margin: auto; }
    input, select, button { padding: 10px; margin-top: 10px; width: 100%; }
    #progress { width: 100%; background: #eee; margin-top: 20px; height: 20px; border-radius: 5px; overflow: hidden; }
    #bar { width: 0; height: 100%; background: green; }
  </style>
</head>
<body>
  <h1>YouTube Downloader</h1>
  <input id="url" placeholder="Paste video or playlist link here" />
  <select id="format">
    <option value="mp4">MP4 (4K 30fps)</option>
    <option value="mp3">MP3</option>
  </select>
  <button onclick="startDownload()">GO</button>

  <div id="progress" style="display:none;"><div id="bar"></div></div>
  <a id="download" style="display:none;" href="#" download>Download File</a>

  <script>
    async function startDownload() {
      const url = document.getElementById("url").value;
      const format = document.getElementById("format").value;

      document.getElementById("progress").style.display = "block";
      document.getElementById("bar").style.width = "0%";

      for (let i = 0; i <= 100; i += 10) {
        await new Promise(r => setTimeout(r, 100));
        document.getElementById("bar").style.width = i + "%";
      }

      const res = await fetch("/api/download", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ url, format })
      });

      const data = await res.json();
      alert(data.message);
      document.getElementById("download").style.display = "block";
      document.getElementById("download").href = "#"; // Put real download URL here later
    }
  </script>
</body>
</html>
